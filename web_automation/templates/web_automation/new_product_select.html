<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Website Automation | Choose Final Copy</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'web_automation/pf_ids.css' %}">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: #0f172a;
            color: #e5e7eb;
        }
        .wrapper {
            max-width: 1100px;
            margin: 0 auto;
            padding: 2rem 1.5rem 3rem;
        }
        .nav {
            margin-bottom: 1rem;
            font-size: 0.85rem;
        }
        .nav a {
            color: #f97316;
            text-decoration: none;
        }
        .nav a:hover {
            color: #fb923c;
            text-decoration: underline;
        }
        h1 {
            font-size: 1.9rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        .subtitle {
            color: #9ca3af;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }
        .grid {
            display: grid;
            grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.2fr);
            gap: 1.5rem;
            align-items: flex-start;
        }
        .panel {
            background: #111827;
            border-radius: 0.75rem;
            padding: 1.25rem 1.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.35);
            margin-bottom: 1.5rem;
        }
        .panel h2 {
            font-size: 1.2rem;
            margin-top: 0;
            margin-bottom: 0.75rem;
        }
        .panel h3 {
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }
        .label {
            font-size: 0.8rem;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }
        .value {
            margin-top: 0.15rem;
        }
        .value pre {
            white-space: pre-wrap;
            font-family: inherit;
            font-size: 0.9rem;
        }
        .group {
            margin-bottom: 1.25rem;
        }
        .radio-list {
            list-style: none;
            padding-left: 0;
            margin: 0;
            font-size: 0.9rem;
        }
        .radio-list li {
            background: #020617;
            border-radius: 0.5rem;
            border: 1px solid #1f2937;
            padding: 0.5rem 0.6rem;
            margin-bottom: 0.4rem;
        }
        .radio-list input[type="radio"] {
            margin-right: 0.4rem;
        }
        textarea, input[type="text"] {
            width: 100%;
            box-sizing: border-box;
            border-radius: 0.5rem;
            border: 1px solid #374151;
            background: #020617;
            color: #e5e7eb;
            padding: 0.4rem 0.6rem;
            font-size: 0.9rem;
            margin-top: 0.35rem;
        }
        textarea:focus, input[type="text"]:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 1px #2563eb;
        }
        .field-label {
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }
        .errorlist {
            margin: 0;
            margin-bottom: 0.25rem;
            padding: 0;
            list-style: none;
            font-size: 0.8rem;
            color: #fca5a5;
        }
        .button-row {
            margin-top: 1rem;
        }
        button {
            background: #2563eb;
            color: #e5e7eb;
            border: none;
            border-radius: 999px;
            padding: 0.5rem 1.25rem;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
        }
        button:hover {
            background: #1d4ed8;
        }
        .preview-card {
            background: #020617;
            border-radius: 0.75rem;
            padding: 1rem 1.25rem;
            border: 1px solid #374151;
            font-size: 0.9rem;
        }
        .preview-card h2 {
            margin-top: 0;
            font-size: 1.1rem;
        }
        .preview-section {
            margin-bottom: 0.7rem;
        }
        .preview-label {
            font-size: 0.8rem;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }
        .preview-value {
            margin-top: 0.2rem;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <div class="nav">
        <a href="/automation/new-product/suggestions/">&larr; Back to Suggestions</a>
        &nbsp;|&nbsp;
        <a href="/automation/">Website Automation Dashboard</a>
    </div>

    <h1>Choose Final Copy</h1>
    <div class="subtitle">
        Pick the title, descriptions, and alt text you want to use for this product. You can also override any
        field with your own wording. After this, we’ll use this copy to build a WooCommerce draft product.
    </div>

    <div class="grid">
        <div class="panel">
            <h2>Artwork Summary</h2>

            <div class="value">
                <div class="label">Title</div>
                <div>{{ intake.title }}</div>
            </div>

            {% if intake.medium %}
            <div class="value" style="margin-top:0.6rem;">
                <div class="label">Medium</div>
                <div>{{ intake.medium }}</div>
            </div>
            {% endif %}

            {% if intake.subject %}
            <div class="value" style="margin-top:0.6rem;">
                <div class="label">Subject / Theme</div>
                <div>{{ intake.subject }}</div>
            </div>
            {% endif %}

            {% if intake.story_notes %}
            <div class="value" style="margin-top:0.6rem;">
                <div class="label">Story Notes</div>
                <div><pre>{{ intake.story_notes }}</pre></div>
            </div>
            {% endif %}
        </div>

        <div class="panel">
            <h2>Select Your Copy</h2>
            <form method="post">
                {% csrf_token %}

                <div class="group">
                    <div class="field-label">{{ form.title_choice.label }}</div>
                    <ul class="radio-list">
                        {% for choice in form.title_choice %}
                            <li>{{ choice.tag }} {{ choice.choice_label }}</li>
                        {% endfor %}
                    </ul>
                    {{ form.custom_title.label_tag }}
                    {{ form.custom_title }}
                    {% if form.title_choice.errors %}
                        {{ form.title_choice.errors }}
                    {% endif %}
                    {% if form.custom_title.errors %}
                        {{ form.custom_title.errors }}
                    {% endif %}
                </div>

                <div class="group">
                    <div class="field-label">{{ form.short_desc_choice.label }}</div>
                    <ul class="radio-list">
                        {% for choice in form.short_desc_choice %}
                            <li>{{ choice.tag }} {{ choice.choice_label }}</li>
                        {% endfor %}
                    </ul>
                    {{ form.custom_short_desc.label_tag }}
                    {{ form.custom_short_desc }}
                    {% if form.short_desc_choice.errors %}
                        {{ form.short_desc_choice.errors }}
                    {% endif %}
                    {% if form.custom_short_desc.errors %}
                        {{ form.custom_short_desc.errors }}
                    {% endif %}
                </div>

                <div class="group">
                    <div class="field-label">{{ form.long_desc_choice.label }}</div>
                    <ul class="radio-list">
                        {% for choice in form.long_desc_choice %}
                            <li>{{ choice.tag }} {{ choice.choice_label }}</li>
                        {% endfor %}
                    </ul>
                    {{ form.custom_long_desc.label_tag }}
                    {{ form.custom_long_desc }}
                    {% if form.long_desc_choice.errors %}
                        {{ form.long_desc_choice.errors }}
                    {% endif %}
                    {% if form.custom_long_desc.errors %}
                        {{ form.custom_long_desc.errors }}
                    {% endif %}
                </div>

                <div class="group">
                    <div class="field-label">{{ form.alt_text_choice.label }}</div>
                    <ul class="radio-list">
                        {% for choice in form.alt_text_choice %}
                            <li>{{ choice.tag }} {{ choice.choice_label }}</li>
                        {% endfor %}
                    </ul>
                    {{ form.custom_alt_text.label_tag }}
                    {{ form.custom_alt_text }}
                    {% if form.alt_text_choice.errors %}
                        {{ form.alt_text_choice.errors }}
                    {% endif %}
                    {% if form.custom_alt_text.errors %}
                        {{ form.custom_alt_text.errors }}
                    {% endif %}
                </div>

                <div class="button-row">
                    <button type="submit">Preview Final Copy</button>
                </div>
            </form>
        </div>
    </div>

    {% if preview %}
    <div class="panel">
        <div class="preview-card">
            <h2>Preview: Final Product Copy</h2>

            <div class="preview-section">
                <div class="preview-label">Title</div>
                <div class="preview-value">{{ preview.title }}</div>
            </div>

            <div class="preview-section">
                <div class="preview-label">Short Description</div>
                <div class="preview-value">{{ preview.short_description }}</div>
            </div>

            <div class="preview-section">
                <div class="preview-label">Long Description</div>
                <div class="preview-value">{{ preview.long_description }}</div>
            </div>

            <div class="preview-section">
                <div class="preview-label">Alt Text</div>
                <div class="preview-value">{{ preview.alt_text }}</div>
            </div>

            <div class="preview-section" style="margin-top:0.8rem;">
                <div class="preview-label">Next Step</div>
                <div class="preview-value">
                    If this looks good, click the button below to let Pauly create a WooCommerce draft product
                    with your standard 11x14 and 8x10 matted options.
                </div>
            </div>
            <form method="post" action="{% url 'web_automation:new_product_create_draft' %}">
                {% csrf_token %}
                <div class="button-row" style="margin-top:1rem;">
                    <button type="submit">Create WooCommerce Draft Product</button>
                </div>
            </form>
        </div>
    </div>
    {% endif %}
</div>
</body>
</html>
